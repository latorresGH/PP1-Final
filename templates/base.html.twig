<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        
        {% block stylesheets %}
            <link rel="stylesheet" href="{{ asset('css/styles.css') }}">
        {% endblock %}
    </head>
    <body>
        <header>
            <div class="header-left">
                <h1>Mi Aplicación</h1>
            </div>
            <div class="header-center">
                <nav>
                    <ul>
                        <li><a href="#">Películas</a></li>
                        <li><a href="#">Series</a></li>
                        <li><a href="#">Ver más tarde</a></li>
                    </ul>
                </nav>
            </div>
            <div class="header-right">
                <div class="profile-info">
                    {% if app.user %}
                        <div class="profile-container">
                            <span>{{ app.user.nombre|capitalize }}</span>
                            <img class="profile-icon" src="{% if app.user.fotoPerfil %}{{ asset('uploads/' ~ app.user.fotoPerfil) }}{% else %}https://i2.pngimg.me/thumb/f/720/c3f2c592f9.jpg{% endif %}" alt="Foto de perfil" onclick="toggleMenu()">
                            <div id="dropdown-menu" class="dropdown-menu">
                                <ul>
                                    <li><a href="#">Ajustes</a></li>
                                    <li><a href="#">Perfil</a></li>
                                    <li><a href="{{ path('app_logout') }}">Cerrar sesión</a></li>
                                </ul>
                            </div>
                        </div>
                    {% else %}
                        <p>No has iniciado sesión.</p>
                    {% endif %}
                </div>
            </div>
        </header>

        {% block body %}{% endblock %}

        <script>
            function toggleMenu() {
                const menu = document.getElementById('dropdown-menu');
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            }

            // Oculta el menú al hacer clic fuera de él
            document.addEventListener('click', function (event) {
                const menu = document.getElementById('dropdown-menu');
                const profileIcon = document.querySelector('.profile-icon');
                if (menu && !menu.contains(event.target) && event.target !== profileIcon) {
                    menu.style.display = 'none';
                }
            });
        </script>

        {% block javascripts %}{% endblock %}
    </body>
</html>
